<!doctype html>
<html lang="en">
  <head>
    <title>CS4241 Assignment 2</title>
    <meta charset="utf-8">
  </head>
  <body>
    <form action="">
      <!-- Fulfill order menu -->
      <table id="orders">
      </table>
      <input type="number" id="orderNum" placeholder="Order number">
      <button id="fulfill">Fulfill</button>
    </form>
  <br>
  <form action="">
    <!-- Order Form -->
    <select id="color">
      <option value="Blue">Blue</option>
      <option value = "Red">Red</option>
      <option value = "Green">Green</option>
    </select>
    <input type="number" id="quantity" placeholder="Quantity">
    <button id="order">Buy now</button>
  </form>
  </body>
  <script>

  const submitOrder = function( e ) {
    // prevent default form action from being carried out
    e.preventDefault()

    const color = document.getElementById( 'color' ),
            quantity = document.getElementById('quantity'),
          json = { color: color.value, quantity: quantity.value},
          body = JSON.stringify( json );
    console.log("Submitting order");

    fetch( '/submit', {
      method:'POST',
      body 
    })
    .then( function( response ) {
      // do something with the response
      console.log( response )
    })

    return false
  };

  const fulfillOrder = function(e) {
    // prevent default form action from being carried out
    e.preventDefault()

    const orderNum = document.getElementById( 'orderNum' ),
            json = {orderNum: orderNum.value},
            body = JSON.stringify( json );
    console.log("Fulfilling order " + orderNum);

    fetch( '/submit', {
      method:'POST',
      body
    })
            .then( function( response ) {
              // do something with the reponse
              console.log( response )
            })

    return false
  };

  window.onload = function() {
    const orderButton = document.getElementById( 'order' );
            const fulfillButton = document.getElementById('fulfill');
            fulfillButton.onclick = fulfillOrder;
            orderButton.onclick = submitOrder;
  }

  </script>
</html>
